# -*- coding: utf-8 -*-
# Generated by Django 1.11.5 on 2017-09-06 17:01
from __future__ import unicode_literals

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('study', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Admin',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(max_length=32, unique=True)),
                ('system_admin', models.BooleanField(default=False, help_text='Whether the admin is also a sysadmin')),
                ('password', models.CharField(max_length=44, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('salt', models.CharField(max_length=24, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('access_key_id', models.CharField(max_length=64, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z+/]+$')])),
                ('access_key_secret', models.CharField(max_length=44, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('access_key_secret_salt', models.CharField(max_length=24, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('deleted', models.BooleanField(default=False)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='DeviceSettings',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('accelerometer', models.BooleanField(default=True)),
                ('gps', models.BooleanField(default=True)),
                ('calls', models.BooleanField(default=True)),
                ('texts', models.BooleanField(default=True)),
                ('wifi', models.BooleanField(default=True)),
                ('bluetooth', models.BooleanField(default=False)),
                ('power_state', models.BooleanField(default=True)),
                ('proximity', models.BooleanField(default=False)),
                ('gyro', models.BooleanField(default=False)),
                ('magnetometer', models.BooleanField(default=False)),
                ('devicemotion', models.BooleanField(default=False)),
                ('reachability', models.BooleanField(default=True)),
                ('allow_upload_over_cellular_data', models.BooleanField(default=False)),
                ('accelerometer_off_duration_seconds', models.PositiveIntegerField(default=10)),
                ('accelerometer_on_duration_seconds', models.PositiveIntegerField(default=10)),
                ('bluetooth_on_duration_seconds', models.PositiveIntegerField(default=60)),
                ('bluetooth_total_duration_seconds', models.PositiveIntegerField(default=300)),
                ('bluetooth_global_offset_seconds', models.PositiveIntegerField(default=0)),
                ('check_for_new_surveys_frequency_seconds', models.PositiveIntegerField(default=21600)),
                ('create_new_data_files_frequency_seconds', models.PositiveIntegerField(default=900)),
                ('gps_off_duration_seconds', models.PositiveIntegerField(default=600)),
                ('gps_on_duration_seconds', models.PositiveIntegerField(default=60)),
                ('seconds_before_auto_logout', models.PositiveIntegerField(default=600)),
                ('upload_data_files_frequency_seconds', models.PositiveIntegerField(default=3600)),
                ('voice_recording_max_time_length_seconds', models.PositiveIntegerField(default=240)),
                ('wifi_log_frequency_seconds', models.PositiveIntegerField(default=300)),
                ('gyro_off_duration_seconds', models.PositiveIntegerField(default=600)),
                ('gyro_on_duration_seconds', models.PositiveIntegerField(default=60)),
                ('magnetometer_off_duration_seconds', models.PositiveIntegerField(default=600)),
                ('magnetometer_on_duration_seconds', models.PositiveIntegerField(default=60)),
                ('devicemotion_off_duration_seconds', models.PositiveIntegerField(default=600)),
                ('devicemotion_on_duration_seconds', models.PositiveIntegerField(default=60)),
                ('about_page_text', models.TextField(default=b"The Beiwe application runs on your phone and helps researchers collect information about your behaviors. Beiwe may ask you to fill out short surveys or to record your voice. It may collect information about your location (using phone GPS) and how much you move (using phone accelerometer). Beiwe may also monitor how much you use your phone for calling and texting and keep track of the people you communicate with. Importantly, Beiwe never records the names or phone numbers of anyone you communicate with. While it can tell if you call the same person more than once, it does not know who that person is. Beiwe also does not record the content of your text messages or phone calls. Beiwe may keep track of the different Wi-Fi networks and Bluetooth devices around your phone, but the names of those networks are replaced with random codes.\n\nAlthough Beiwe collects large amounts of data, the data is processed to protect your privacy. This means that it does not know your name, your phone number, or anything else that could identify you. Beiwe only knows you by an identification number. Because Beiwe does not know who you are, it cannot communicate with your clinician if you are ill or in danger. Researchers will not review the data Beiwe collects until the end of the study. To make it easier for you to connect with your clinician, the 'Call my Clinician' button appears at the bottom of every page.\n\nBeiwe was conceived and designed by Dr. Jukka-Pekka 'JP' Onnela at the Harvard T.H. Chan School of Public Health. Development of the Beiwe smartphone application and data analysis software is funded by NIH grant 1DP2MH103909-01 to Dr. Onnela. The smartphone application was built by Zagaran, Inc., in Cambridge, Massachusetts.")),
                ('call_clinician_button_text', models.TextField(default='Call My Clinician')),
                ('consent_form_text', models.TextField(default=b'I have read and understood the information about the study and all of my questions about the study have been answered by the study researchers.')),
                ('survey_submit_success_toast_text', models.TextField(default=b"Thank you for completing the survey. A clinician will not see your answers immediately, so if you need help or are thinking about harming yourself, please contact your clinician. You can also press the 'Call My Clinician' button.")),
                ('consent_sections', models.TextField(default=b'{"study_tasks": {"text": "", "more": ""}, "data_use": {"text": "", "more": ""}, "withdrawing": {"text": "", "more": ""}, "privacy": {"text": "", "more": ""}, "study_survey": {"text": "", "more": ""}, "welcome": {"text": "", "more": ""}, "data_gathering": {"text": "", "more": ""}, "time_commitment": {"text": "", "more": ""}}')),
                ('deleted', models.BooleanField(default=False)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Participant',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('patient_id', models.CharField(help_text='Eight-character unique ID with characters chosen from 1-9 and a-z', max_length=8, unique=True, validators=[django.core.validators.RegexValidator('^[1-9a-z]+$', message='Invalid Participant ID')])),
                ('device_id', models.CharField(help_text='The ID of the device that the participant is using for the study, provided by the mobile API.', max_length=256, null=True)),
                ('os_type', models.CharField(choices=[('ANDROID', 'ANDROID'), ('IOS', 'IOS')], max_length=16, null=True)),
                ('password', models.CharField(max_length=44, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('salt', models.CharField(max_length=24, validators=[django.core.validators.RegexValidator('^[0-9a-zA-Z_\\-]+$')])),
                ('deleted', models.BooleanField(default=False)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='Survey',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('content', models.TextField(default='[]', help_text='JSON blob containing information about the survey questions.')),
                ('timings', models.TextField(default=b'[[], [], [], [], [], [], []]', help_text='JSON blob containing the times at which the survey is sent.')),
                ('survey_type', models.CharField(choices=[('audio', 'audio_survey'), ('tracking', 'tracking_survey')], max_length=16)),
                ('settings', models.TextField(default='{}', help_text='JSON blob containing settings for the survey.')),
                ('deleted', models.BooleanField(default=False)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.AlterField(
            model_name='study',
            name='encryption_key',
            field=models.CharField(max_length=32),
        ),
        migrations.AlterField(
            model_name='study',
            name='name',
            field=models.TextField(),
        ),
        migrations.AddField(
            model_name='survey',
            name='study',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='surveys', to='study.Study'),
        ),
        migrations.AddField(
            model_name='participant',
            name='study',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='participants', to='study.Study'),
        ),
        migrations.AddField(
            model_name='devicesettings',
            name='study',
            field=models.OneToOneField(on_delete=django.db.models.deletion.PROTECT, related_name='device_settings', to='study.Study'),
        ),
        migrations.AddField(
            model_name='admin',
            name='studies',
            field=models.ManyToManyField(related_name='admins', to='study.Study'),
        ),
    ]
